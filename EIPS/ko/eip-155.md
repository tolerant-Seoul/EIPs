---
eip: 155
title: 간단한 재생 공격 방지
author: Vitalik Buterin (@vbuterin)
type: Standards Track
category: Core
status: Final
created: 2016-10-14
lang: ko
original: ../eip-155.md
---

### 하드 포크
[Spurious Dragon](./eip-607.md)

### 매개변수
- `FORK_BLKNUM`: 2,675,000
- `CHAIN_ID`: 1 (메인넷)

### 사양

`block.number >= FORK_BLKNUM`이고 `CHAIN_ID`가 사용 가능한 경우, 서명 목적으로 트랜잭션의 해시를 계산할 때, 6개의 RLP 인코딩 요소 `(nonce, gasprice, startgas, to, value, data)`만 해싱하는 대신, 9개의 RLP 인코딩 요소 `(nonce, gasprice, startgas, to, value, data, chainid, 0, 0)`를 해싱**해야 합니다(SHOULD)**. 그렇게 하면 서명의 `v`는 **반드시** `{0,1} + CHAIN_ID * 2 + 35`로 설정**되어야 합니다(MUST)**. 여기서 `{0,1}`은 secp256k1 서명 과정에서 `r`이 x-값인 곡선 점의 `y` 값의 패리티입니다. 6개의 값만 해싱하기로 선택하면 `v`는 이전과 같이 `{0,1} + 27`로 계속 설정됩니다.

`block.number >= FORK_BLKNUM`이고 `v = CHAIN_ID * 2 + 35` 또는 `v = CHAIN_ID * 2 + 36`인 경우, 복구 목적으로 트랜잭션의 해시를 계산할 때, 6개의 RLP 인코딩 요소 `(nonce, gasprice, startgas, to, value, data)` 대신 9개의 RLP 인코딩 요소 `(nonce, gasprice, startgas, to, value, data, chainid, 0, 0)`를 해싱합니다. `v = 27`과 `v = 28`을 사용하는 현재 존재하는 서명 체계는 유효한 상태로 유지되며 이전과 동일한 규칙에 따라 계속 작동합니다.

### 예시

`nonce = 9`, `gasprice = 20 * 10**9`, `startgas = 21000`, `to = 0x3535353535353535353535353535353535353535`, `value = 10**18`, `data=''` (비어있음)인 트랜잭션을 고려합니다.

"서명 데이터"는 다음이 됩니다:

```
0xec098504a817c800825208943535353535353535353535353535353535353535880de0b6b3a764000080018080
```

"서명 해시"는 다음이 됩니다:

```
0xdaf5a779ae972f972197303d7b574746c7ef83eadac0f2791ad23db92e4c8e53
```

트랜잭션이 개인 키 `0x4646464646464646464646464646464646464646464646464646464646464646`으로 서명되면 v,r,s 값은 다음이 됩니다:

```
(37, 18515461264373351373200002665853028612451056578545711640558177340181847433846, 46948507304638947509940763649030358759909902576025900602547168820602576006531)
```

27 대신 37이 사용되는 것에 주목하세요. 서명된 트랜잭션은 다음이 됩니다:

```
0xf86c098504a817c800825208943535353535353535353535353535353535353535880de0b6b3a76400008025a028ef61340bd939bc2195fe537567866003e1a15d3c71ff63e1590620aa636276a067cbe9d8997f761aecb703304b3800ccf555c9f3dc64214b297fb1966a3b6d83
```

### 근거

이것은 ETC나 Morden 테스트넷에서 작동하지 않고 이더리움에서만 작동하는 트랜잭션을 보내는 방법을 제공합니다. ETC는 `CHAIN_ID`를 다른 값으로 대체하여 이 EIP를 채택하도록 권장되며, 모든 미래의 테스트넷, 컨소시엄 체인 및 대안 이더리움은 `CHAIN_ID`를 고유한 값으로 대체하여 이 EIP를 채택하도록 권장됩니다.

### Chain ID 목록:

| `CHAIN_ID`     | 체인                                       |
| ---------------| -------------------------------------------|
| 1              | 이더리움 메인넷                              |
| 2              | Morden (사용 중지됨), Expanse 메인넷         |
| 3              | Ropsten                                    |
| 4              | Rinkeby                                    |
| 5              | Goerli                                     |
| 42             | Kovan                                      |
| 1337           | Geth 프라이빗 체인 (기본값)                  |

더 많은 Chain ID는 [chainid.network](https://chainid.network)에서 찾고 [ethereum-lists/chains](https://github.com/ethereum-lists/chains)에 기여할 수 있습니다.
