---
eip: 1337
title: 블록체인 구독
author: Kevin Owocki, Andrew Redden, Scott Burke, Kevin Seagraves, Luka Kacil, Štefan Šimec, Piotr Kosiński, ankit raj, John Griffin, Nathan Creswell
status: Stagnant
type: Standards Track
category: ERC
created: 2018-08-01
lang: ko
original: https://github.com/ethereum/ERCs/blob/master/ERCS/erc-1337.md
---

## 요약

ERC-1337은 이더리움에서 반복 구독 결제를 구현하기 위한 표준 메커니즘을 제안합니다. 사용자 서명 해시를 오프체인에 저장하고 스마트 컨트랙트를 통해 실행하는 "재실행 가능한 트랜잭션"을 가능하게 합니다.

## 동기

구독은 토큰 기반 시스템보다 더 건강한 수익화 모델을 나타냅니다.

**사용자 입장:**
- dApp의 유틸리티를 사용하기 위해 복잡한 백서를 읽을 필요 없음
- 언제든지 취소 가능
- 예측 가능한 비용

**서비스 제공자 입장:**
- 예측 가능한 현금 흐름
- 구독자 수, 이탈률, 전환율을 알고 있어 정확한 예측 가능
- 지속 가능한 비즈니스 모델 구축

## 기술 아키텍처

### 열거형

명세는 세 가지 핵심 열거형을 활용합니다:

**Operation (작업 유형)**
```solidity
enum Operation {
    Call,           // 일반 호출
    DelegateCall,   // 위임 호출
    Create,         // 컨트랙트 생성
    ERC20,          // ERC20 전송
    ERC20Approve    // ERC20 승인
}
```

**SubscriptionStatus (구독 상태)**
```solidity
enum SubscriptionStatus {
    Active,     // 활성
    Paused,     // 일시정지
    Cancelled,  // 취소됨
    Expired     // 만료됨
}
```

**Period (기간)**
```solidity
enum Period {
    Init,   // 초기화
    Day,    // 일간
    Week,   // 주간
    Month   // 월간
}
```

## 주요 함수

### View 함수

**`isValidSubscription()`**
구독의 유효성을 검증합니다.

**`getSubscriptionStatus()`**
열거된 상태와 다음 출금 날짜를 반환합니다.

**`getSubscriptionHash()`**
트랜잭션 매개변수로부터 암호화 식별자를 생성합니다.

**`getModifyStatusHash()`**
상태 수정 승인을 위한 해시를 생성합니다.

### 실행 함수

**`modifyStatus()`**
서명 승인을 통해 구독 상태를 변경합니다.

```solidity
function modifyStatus(
    bytes32 subscriptionHash,
    SubscriptionStatus status,
    bytes memory signature
) public returns (bool);
```

**`executeSubscription()`**
연결된 서명으로 반복 결제를 처리합니다.

```solidity
function executeSubscription(
    address from,
    address to,
    uint256 value,
    bytes memory data,
    Operation operation,
    uint256 periodSeconds,
    uint256 gasPrice,
    bytes memory signature
) public returns (bool);
```

## 설계 근거

이 메커니즘은 레거시 결제 처리기를 모방합니다:

1. **전통적 방식**: 상인이 반복 카드 청구에 대한 접근 권한을 부여하는 토큰을 저장
2. **ERC-1337 방식**: 상인이 승인된 반복 트랜잭션을 나타내는 사용자 서명 해시를 저장하고, 스마트 컨트랙트를 통해 필요 시 실행

### 보안 고려사항

- **서명 검증**: 모든 구독 실행은 유효한 서명 필요
- **상태 관리**: 구독 상태는 온체인에서 추적
- **취소 메커니즘**: 사용자는 언제든지 구독 취소 가능
- **가스 가격 보호**: 실행 시 가스 가격 제한 설정 가능

### 사용 사례

- SaaS 구독 서비스
- 콘텐츠 구독 플랫폼
- 정기 기부/후원
- 멤버십 프로그램
- 정기 결제가 필요한 모든 dApp

## 역호환성

ERC-1337은 기존 이더리움 작업에 영향을 주지 않는 새로운 기능을 도입합니다.

## 저작권

저작권 및 관련 권리는 CC0를 통해 포기되었습니다.
