---
eip: 5564
title: 스텔스 주소
author: Nerolation, Vitalik Buterin, Matt Solomon, Toni Wahrstätter, Ben DiFrancesco, Gary Ghayrat
status: Final
type: Standards Track
category: ERC
created: 2022-08-13
lang: ko
original: https://github.com/ethereum/ERCs/blob/master/ERCS/erc-5564.md
---

## 요약

ERC-5564는 스텔스 주소를 위한 표준화된 방법을 수립하여, 송신자가 사전 통신 없이 수신자만 접근할 수 있는 임시 계정을 생성할 수 있게 하는 "비대화형 프라이빗 트랜잭션"을 가능하게 합니다.

## 동기

이더리움의 기본 특성상 모든 트랜잭션과 잔액이 공개되어 있습니다. 스텔스 주소 표준화는 이더리움의 프라이버시 기능을 크게 향상시킬 수 있습니다. 이를 통해:

- 수신자의 신원을 밝히지 않고 자산 전송 가능
- 외부 소유 계정(EOA)과 스마트 컨트랙트 모두 프라이버시 보존 트랜잭션에 참여 가능
- 다양한 스텔스 주소 체계 사용 가능

## 핵심 개념

### 스텔스 메타 주소

수신자는 **스텔스 메타 주소**를 공개합니다. 이는 두 개의 암호화 키 쌍으로 구성됩니다:

1. **지출 키(Spending Key)**: 스텔스 주소의 자금을 사용하는 데 필요
2. **조회 키(Viewing Key)**: 들어오는 트랜잭션을 확인하는 데 사용

### 작동 방식

```
1. 송신자: 수신자의 스텔스 메타 주소를 가져옴
2. 송신자: 임시 키 쌍을 생성
3. 송신자: 스텔스 주소를 계산하고 자금 전송
4. 송신자: 임시 공개키와 뷰 태그를 Announcer 컨트랙트에 게시
5. 수신자: 조회 키를 사용해 자신의 트랜잭션인지 확인
6. 수신자: 지출 키를 계산하여 자금 사용
```

## 명세

### 싱글톤 컨트랙트

스텔스 주소 발표를 위한 싱글톤 컨트랙트가 배포됩니다:
- **주소**: `0x55649E01B5Df198D18D95b5cc5051630cfD45564`

### 핵심 함수

#### `generateStealthAddress()`

송신자가 스텔스 메타 주소를 입력하면 스텔스 주소, 임시 공개키, 뷰 태그를 반환합니다.

```solidity
function generateStealthAddress(
    bytes calldata stealthMetaAddress
) external view returns (
    address stealthAddress,
    bytes memory ephemeralPubKey,
    uint8 viewTag
);
```

#### `checkStealthAddress()`

수신자가 개인키를 사용하여 트랜잭션이 자신에게 속하는지 확인합니다.

```solidity
function checkStealthAddress(
    address stealthAddress,
    bytes memory ephemeralPubKey,
    bytes memory viewingKey,
    bytes memory spendingPubKey
) external view returns (bool);
```

#### `computeStealthKey()`

수신자가 스텔스 주소의 자금을 사용하는 데 필요한 개인키를 파생합니다.

```solidity
function computeStealthKey(
    bytes memory ephemeralPubKey,
    bytes memory viewingKey,
    bytes memory spendingKey
) external view returns (bytes memory);
```

### SECP256k1 체계 (schemeId = 1)

명세는 뷰 태그와 함께 타원 곡선 암호화를 사용합니다.

**뷰 태그의 장점:**
- 모든 발표에 대해 전체 암호화 검증을 수행하는 대신, 수신자는 먼저 단일 바이트를 비교
- 256개 중 255개 경우에서 불필요한 계산을 건너뛸 수 있음
- 수신자 파싱 시간을 약 6배 감소

**공유 비밀 파생:**
```
shared_secret = hash(ephemeral_private_key * viewing_public_key)
stealth_address = spending_public_key + shared_secret * G
```

## 프라이버시 모델

수신자가 식별 불가능한 이유:

1. 조회 키를 가진 수신자만 자신의 트랜잭션을 인식할 수 있음
2. 송신자는 스텔스 주소를 수신자의 신원에 연결할 수 없음
3. 각 트랜잭션은 고유한 임시 키를 사용

## 보안 고려사항

### 스팸 완화

발표 이벤트 스팸은 공격자에게 비용이 들지 않지만 수신자에게 부담을 줍니다. 제안된 솔루션:
- 스테이킹 메커니즘
- 파싱 제공자에 의한 안티스팸 필터링
- 트랜잭션 수수료("톨")

### 펀딩 프라이버시

수신자는 첫 트랜잭션 중 프라이버시를 유지하기 위해 연결되지 않은 소스에서 초기 ETH 후원을 받아야 합니다. 이를 위한 옵션:
- 프라이버시 풀 사용
- CEX에서 직접 출금
- 새 EOA에서 전송

## 역호환성

ERC-5564는 기존 이더리움 작업이나 표준에 영향을 주지 않는 완전히 새로운 기능을 도입합니다.

## 관련 표준

- **ERC-6538**: 스텔스 메타 주소 레지스트리 - 이 표준과 함께 사용하여 스텔스 메타 주소를 온체인에 등록

## 저작권

저작권 및 관련 권리는 CC0를 통해 포기되었습니다.
