---
eip: 6538
title: 스텔스 메타 주소 레지스트리
author: Matt Solomon, Toni Wahrstätter, Ben DiFrancesco, Vitalik Buterin, Gary Ghayrat
status: Final
type: Standards Track
category: ERC
created: 2023-01-24
requires: 5564
lang: ko
original: https://github.com/ethereum/ERCs/blob/master/ERCS/erc-6538.md
---

## 요약

이 표준은 엔티티가 스텔스 메타 주소를 등록하고 검색하기 위한 정규 메커니즘을 수립합니다. 이 명세는 ERC-5564를 확장하며 암호화 서명을 사용하여 직접 또는 승인된 제3자를 통한 등록을 허용합니다. 등록된 주소는 수신자의 신원을 밝히지 않고 스텔스 주소로 자산을 전송할 수 있게 합니다.

## 동기

저자들은 "스텔스 주소 생성의 표준화가 이더리움의 프라이버시 기능을 크게 향상시킬 잠재력을 가지고 있다"고 강조합니다.

스텔스 메타 주소 저장을 중앙화함으로써:
- 외부 소유 계정(EOA)과 스마트 컨트랙트 모두 프라이버시 보존 트랜잭션에 참여 가능
- 다양한 스텔스 주소 체계 사용 가능
- 오프체인 의존성 제거
- 생태계 전반의 표준화된 등록

## 기술 명세

### 배포 정보

싱글톤 레지스트리는 결정론적 배포 메커니즘을 사용하여 다음 주소에 배포됩니다:
- **주소**: `0x6538E6bf4B0eBd30A8Ea093027Ac2422ce5d6538`

### 핵심 함수

#### `registerKeys()`

스텔스 메타 주소의 직접 자가 등록을 허용합니다.

```solidity
function registerKeys(
    uint256 schemeId,
    bytes calldata stealthMetaAddress
) external;
```

**매개변수:**
- `schemeId`: 암호화 체계 식별자 (ERC-5564의 SECP256k1 변형은 1)
- `stealthMetaAddress`: 등록할 스텔스 메타 주소

#### `registerKeysOnBehalf()`

유효한 서명으로 제3자 등록을 가능하게 합니다.

```solidity
function registerKeysOnBehalf(
    address registrant,
    uint256 schemeId,
    bytes calldata stealthMetaAddress,
    bytes calldata signature
) external;
```

이를 통해:
- 사용자 대신 서비스가 등록 가능
- 가스 비용 후원 가능
- 배치 등록 지원

#### `incrementNonce()`

보안을 위해 기존 서명을 무효화합니다.

```solidity
function incrementNonce() external;
```

사용 사례:
- 개인키 손상 시 즉시 기존 서명 무효화
- 등록 취소 메커니즘

#### `DOMAIN_SEPARATOR()`

EIP-712 도메인 분리를 구현합니다.

```solidity
function DOMAIN_SEPARATOR() external view returns (bytes32);
```

### 이벤트

```solidity
event StealthMetaAddressSet(
    address indexed registrant,
    uint256 indexed schemeId,
    bytes stealthMetaAddress
);

event NonceIncremented(
    address indexed registrant,
    uint256 newNonce
);
```

### 체계 식별자

구현은 체계 식별자를 사용하여 다양한 암호화 접근 방식을 구분합니다:

| schemeId | 설명 |
|----------|------|
| 1 | ERC-5564에서 지정한 SECP256k1 곡선 변형 |

향후 추가 체계 지원 가능.

## 주요 이점

근거 섹션에서 강조하는 중앙화의 이점:

1. **상호운용성 보장**: 모든 애플리케이션이 동일한 레지스트리 사용
2. **오프체인 의존성 제거**: 온체인에서 직접 조회 가능
3. **표준화된 등록**: 일관된 등록 프로세스
4. **싱글톤 접근**: 생태계 전반의 채택 가능

## 보안 및 호환성

### 보안 고려사항

- **키 손상 시 즉시 등록 해제**: 개인키가 손상되면 `incrementNonce()`를 호출하여 기존 서명 무효화
- **서명 재사용 방지**: 논스 기반 서명 검증
- **EIP-712 준수**: 안전한 서명 체계 사용

### 역호환성

이 명세는 기존 표준에 영향을 주지 않으면서 주요 보안 우려사항, 특히 개인키 손상 후 즉시 등록 해제를 다룹니다.

## ERC-5564와의 관계

ERC-6538은 ERC-5564의 동반 표준입니다:

- **ERC-5564**: 스텔스 주소 생성 및 발표 메커니즘 정의
- **ERC-6538**: 스텔스 메타 주소를 온체인에 저장하고 검색하는 레지스트리 제공

두 표준을 함께 사용하면 완전한 스텔스 주소 인프라를 구축할 수 있습니다.

## 사용 흐름

```
1. 수신자: 스텔스 메타 주소 생성 (오프체인)
2. 수신자: registerKeys()로 레지스트리에 등록
3. 송신자: 레지스트리에서 수신자의 스텔스 메타 주소 조회
4. 송신자: ERC-5564를 사용해 스텔스 주소 생성 및 자금 전송
5. 수신자: ERC-5564 발표 모니터링 및 자금 수령
```

## 저작권

저작권 및 관련 권리는 CC0를 통해 포기되었습니다.
