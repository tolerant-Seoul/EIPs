---
eip: 6900
title: 모듈러 스마트 컨트랙트 계정
author: Adam Egyed, Fangting Liu, Huijiao Guo, David Philipson, David Arandi
status: Draft
type: Standards Track
category: ERC
created: 2023-04-01
requires: 4337
lang: ko
original: https://github.com/ethereum/ERCs/blob/master/ERCS/erc-6900.md
---

## 요약

ERC-6900은 모듈러 구성 요소를 통해 확장 가능한 스마트 컨트랙트 계정을 만들기 위한 프레임워크를 수립합니다. 이 명세는 개발자가 다양한 플랫폼에서 조합할 수 있는 검증, 실행 및 훅 함수에 대한 표준화된 인터페이스를 제공하여 계정 구현의 파편화를 해결합니다.

## 동기

"여러 계정 구현을 관리하는 것은 지원되는 기능에 따라 계정을 파편화하여 사용자 경험을 저하시킵니다."

공통 표준을 수립함으로써:
- 모듈 개발자는 한 번 구축하고 호환되는 모든 계정에 배포 가능
- 사용자는 이식성과 선택권 획득
- 생태계 전반의 상호운용성 보장

## 핵심 아키텍처

표준은 세 가지 모듈러 함수 유형을 정의합니다:

### 1. 검증 함수 (Validation Functions)
승인 조건을 결정합니다. 트랜잭션이나 서명이 유효한지 확인하는 역할을 합니다.

### 2. 실행 함수 (Execution Functions)
계정이 허용하는 사용자 정의 로직을 수행합니다. 실제 작업을 실행합니다.

### 3. 훅 (Hooks)
실행 전/후 제어를 강제합니다. 추가적인 검사나 로깅 등을 수행합니다.

## 검증 흐름

이들은 세 가지 검증 흐름에서 작동합니다:

1. **UserOperation 검증**: ERC-4337을 통한 검증
2. **런타임 검증**: `executeWithRuntimeValidation`을 통한 검증
3. **서명 검증**: ERC-1271을 통한 서명 검증

## 주요 인터페이스

### IERC6900Account

계정의 핵심 인터페이스로 모듈 설치/제거 및 실행을 관리합니다.

```solidity
interface IERC6900Account {
    // 실행 모듈 설치
    function installExecution(
        address module,
        ExecutionManifest calldata manifest,
        bytes calldata installData
    ) external;

    // 실행 모듈 제거
    function uninstallExecution(
        address module,
        ModuleManifest calldata manifest,
        bytes calldata uninstallData
    ) external;

    // 단일 호출 실행
    function execute(address target, uint256 value, bytes calldata data)
        external payable returns (bytes memory);

    // 배치 호출 실행
    function executeBatch(Call[] calldata calls)
        external payable returns (bytes[] memory);
}
```

### IERC6900Module

모듈이 구현해야 하는 라이프사이클 메서드를 요구합니다.

```solidity
interface IERC6900Module {
    // 모듈 설치 시 호출
    function onInstall(bytes calldata data) external;

    // 모듈 제거 시 호출
    function onUninstall(bytes calldata data) external;

    // 모듈 타입 ID 반환
    function moduleId() external view returns (string memory);
}
```

### 전문화된 인터페이스

- **IERC6900ValidationModule**: 검증 처리
- **IERC6900ExecutionHookModule**: 실행 훅 처리
- **IERC6900ValidationHookModule**: 검증 훅 처리

## 설치 요구사항

모듈 설치 시 계정은 다음을 수행해야 합니다:

1. 지정된 모든 훅 설치
2. 모듈 초기화 함수 호출
3. 함수 셀렉터에 대한 검증 적용 가능성 구성
4. `isGlobal` 및 `isUserOpValidation`과 같은 권한 플래그 설정

## 보안 강조

### 실행 매니페스트 검증
지갑 개발자는 설치 전에 실행 매니페스트를 신중하게 검증해야 합니다.

### 글로벌 검증 위험
글로벌 검증 함수는 "노출된 네이티브 실행 함수에 대한 루트 액세스"를 얻을 수 있어 특별히 위험합니다.

### 재설치 방지
모듈 개발자는 재설치 시 권한의 우발적 재사용을 방지하기 위해 관련 상태를 완전히 제거해야 합니다.

## 사용 사례

- **다중 서명 지갑**: 여러 서명자가 필요한 계정
- **세션 키**: 제한된 권한을 가진 임시 키
- **지출 한도**: 트랜잭션당 또는 기간당 제한
- **자동화**: 조건부 자동 실행
- **복구 메커니즘**: 소셜 복구 등

## ERC-4337과의 관계

ERC-6900은 ERC-4337을 기반으로 구축되어 계정 추상화의 모듈화를 가능하게 합니다. ERC-4337이 계정 추상화의 기본 인프라를 제공하고, ERC-6900은 그 위에 모듈러 확장성을 추가합니다.

## 역호환성

기존에 배포된 스마트 계정은 프록시 업그레이드를 통해 이 표준을 구현할 수 있습니다.

## 저작권

저작권 및 관련 권리는 CC0를 통해 포기되었습니다.
